<?xml version="1.0" encoding="UTF-8"?>
<project name="cookandroid" default="help">

    <path id="jars">
        <fileset dir="libs" includes="**/*.jar"/>
    </path>

    <target name="-compile">
        <mkdir dir="bin/classes"/>
        <javac srcdir="src" destdir="bin/classes" classpathref="jars" includeantruntime="false" debug="on"/>
    </target>

    <target name="asm" depends="-compile">
        <jar destfile="bin/cookandroid.jar"
            basedir="bin/classes"
            filesetmanifest="skip"
            includes="org/tsg/android/asm/*">

            <zipgroupfileset dir="libs" includes="*.jar"/>

            <manifest>
                <attribute name="Main-Class" value="org.tsg.android.asm.Main"/>
            </manifest>
        </jar>
    </target>

    <target name="api" depends="-compile">
        <jar destfile="bin/cookandroid-api.jar"
            basedir="bin/classes"
            filesetmanifest="skip"
            includes="org/tsg/android/api/*">
        </jar>
    </target>

    <target name="build" depends="asm, api"/>

    <target name="install" depends="build">
        <echo>Copying assets to ${project}</echo>
        <mkdir dir="${project}/compile-libs"/>
        <copy file="bin/cookandroid.jar" todir="${project}/compile-libs" overwrite="true" />
        <copy file="bin/cookandroid-api.jar" todir="${project}/libs" overwrite="true" />
        <copy file="cook_rules.xml" todir="${project}/" overwrite="true" />
    </target>

    <target name="clean">
        <delete dir="bin" />
    </target>
</project>